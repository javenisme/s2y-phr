{
  "$schema": "https://turborepo.org/schema.json",
  "globalEnv": ["NODE_VERSION", "MEDPLUM_GIT_SHORTHASH"],
  "tasks": {
    "clean": {
      "outputs": ["build/**", "dist/**", "coverage/**"]
    },
    "build": {
      "dependsOn": ["^build"],
      "outputs": ["build/**", "dist/**", ".next/**", "!.next/cache/**"],
      "env": [
        "NODE_ENV",
        "MEDPLUM_BASE_URL",
        "MEDPLUM_BASE_URL_PROD",
        "MEDPLUM_APP_BASE_URL_PROD",
        "MEDPLUM_CLIENT_ID",
        "MEDPLUM_ADMIN_CLIENT_ID",
        "MEDPLUM_REGISTER_ENABLED",
        "MEDPLUM_DATABASE_HOST",
        "MEDPLUM_DATABASE_PORT",
        "MEDPLUM_DATABASE_DBNAME",
        "MEDPLUM_DATABASE_USERNAME",
        "MEDPLUM_DATABASE_PASSWORD",
        "MEDPLUM_DATABASE_SSL_REQUIRE",
        "MEDPLUM_DATABASE_SSL_REJECT_UNAUTHORIZED",
        "MEDPLUM_REDIS_HOST",
        "MEDPLUM_REDIS_PORT",
        "MEDPLUM_REDIS_PASSWORD",
        "MEDPLUM_SIGNING_KEY_ID",
        "MEDPLUM_SIGNING_KEY_PASSPHRASE",
        "MEDPLUM_ALLOWED_ORIGINS",
        "MEDPLUM_ALLOWED_ORIGINS_PROD",
        "MEDPLUM_GOOGLE_CLIENT_ID",
        "MEDPLUM_GOOGLE_CLIENT_SECRET",
        "MEDPLUM_RECAPTCHA_SITE_KEY",
        "MEDPLUM_RECAPTCHA_SECRET_KEY",
        "MEDPLUM_VM_CONTEXT_BOTS_ENABLED",
        "MEDPLUM_DEFAULT_BOT_RUNTIME_VERSION",
        "MEDPLUM_INTROSPECTION_ENABLED",
        "MEDPLUM_BINARY_STORAGE",
        "MEDPLUM_BINARY_STORAGE_PROD",
        "MEDPLUM_STORAGE_BASE_URL",
        "MEDPLUM_STORAGE_BASE_URL_PROD",
        "MEDPLUM_MAX_JSON_SIZE",
        "MEDPLUM_MAX_BATCH_SIZE",
        "MEDPLUM_SHUTDOWN_TIMEOUT_MILLISECONDS",
        "MEDPLUM_SUPPORT_EMAIL",
        "MEDPLUM_BOT_LAMBDA_ROLE_ARN",
        "MEDPLUM_BOT_LAMBDA_LAYER_NAME",
        "GOOGLE_CLIENT_ID",
        "RECAPTCHA_SITE_KEY"
      ]
    },
    "test": {
      "dependsOn": ["build"],
      "outputs": ["coverage/**"],
      "inputs": ["src/**/*.tsx", "src/**/*.ts"]
    },
    "lint": {
      "dependsOn": ["build"]
    },
    "lint:fix": {
      "dependsOn": ["build"]
    }
  }
}
