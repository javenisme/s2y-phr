# =======================================================
# MEDPLUM PRODUCTION ENVIRONMENT VARIABLES FOR VERCEL
# =======================================================
# 
# 域名配置信息：
# - Vercel 分配域名: s2y-phi-app.vercel.app  
# - 自定义域名: phi.s2y.us (已配置)
# - Redis: Upstash (已配置)
# 
# 使用说明：
# 1. 确保在 Vercel 项目中配置自定义域名 phi.s2y.us
# 2. 在 Vercel 控制台批量导入这些变量
# 3. 重新部署应用
#
# 注意：Vercel 中的变量名不需要 @ 前缀，直接使用变量名即可
# =======================================================

# -----------------------------------------------------
# 核心应用配置
# -----------------------------------------------------
NODE_ENV=production

# 应用 URL 配置
# Vercel 分配域名: s2y-phi-app.vercel.app
# 自定义域名: phi.s2y.us
MEDPLUM_BASE_URL=https://phi.s2y.us/
MEDPLUM_BASE_URL_PROD=https://phi.s2y.us/
MEDPLUM_APP_BASE_URL_PROD=https://phi.s2y.us/

# 客户端配置
MEDPLUM_CLIENT_ID=2a4b77f2-4d4e-43c6-9b01-330eb5ca772f
MEDPLUM_ADMIN_CLIENT_ID=2a4b77f2-4d4e-43c6-9b01-330eb5ca772f

# -----------------------------------------------------
# 数据库配置 (Supabase - 已验证)
# -----------------------------------------------------
MEDPLUM_DATABASE_HOST=aws-0-us-east-1.pooler.supabase.com
MEDPLUM_DATABASE_PORT=5432
MEDPLUM_DATABASE_DBNAME=postgres
MEDPLUM_DATABASE_USERNAME=postgres.nkuczuywgfuelgrkneql
MEDPLUM_DATABASE_PASSWORD=Sing2YHVH!777
MEDPLUM_DATABASE_SSL_REQUIRE=true
MEDPLUM_DATABASE_SSL_REJECT_UNAUTHORIZED=false

# -----------------------------------------------------
# Redis 配置 (Upstash - 已配置)
# -----------------------------------------------------
# Upstash Redis 配置信息：
# URL: https://enough-kite-37221.upstash.io
# Region: N. Virginia, USA (us-east-1)
# Created: 已完成设置

MEDPLUM_REDIS_HOST=enough-kite-37221.upstash.io
MEDPLUM_REDIS_PORT=6379
MEDPLUM_REDIS_PASSWORD=AZFlAAIncDEzM2EzMjBmZjcwYmQ0NjNhYWI3ZTRjYzIwYmU0YjkxM3AxMzcyMjE

# 只读令牌（如需要）
# MEDPLUM_REDIS_READONLY_TOKEN=ApFlAAIgcDEJ-FNiyNQMEsCFrjIE_Lhoc2WQVc3q19k9K60xzPc5WA

# -----------------------------------------------------
# 安全配置
# -----------------------------------------------------
MEDPLUM_SIGNING_KEY_ID=my-key-id
MEDPLUM_SIGNING_KEY_PASSPHRASE=top_secret

# CORS 配置
MEDPLUM_ALLOWED_ORIGINS=https://phi.s2y.us
MEDPLUM_ALLOWED_ORIGINS_PROD=https://phi.s2y.us

# -----------------------------------------------------
# Google OAuth 配置 (已验证)
# -----------------------------------------------------
MEDPLUM_GOOGLE_CLIENT_ID=397236612778-c0b5tnjv98frbo1tfuuha5vkme3cmq4s.apps.googleusercontent.com
GOOGLE_CLIENT_ID=397236612778-c0b5tnjv98frbo1tfuuha5vkme3cmq4s.apps.googleusercontent.com
MEDPLUM_GOOGLE_CLIENT_SECRET=

# -----------------------------------------------------
# reCAPTCHA 配置 (已验证)
# -----------------------------------------------------
MEDPLUM_RECAPTCHA_SITE_KEY=6LfHdsYdAAAAAC0uLnnRrDrhcXnziiUwKd8VtLNq
MEDPLUM_RECAPTCHA_SECRET_KEY=6LfHdsYdAAAAAH9dN154jbJ3zpQife3xaiTvPChL
RECAPTCHA_SITE_KEY=6LfHdsYdAAAAAC0uLnnRrDrhcXnziiUwKd8VtLNq

# -----------------------------------------------------
# 功能开关配置
# -----------------------------------------------------
MEDPLUM_REGISTER_ENABLED=true
MEDPLUM_VM_CONTEXT_BOTS_ENABLED=true
MEDPLUM_DEFAULT_BOT_RUNTIME_VERSION=vmcontext
MEDPLUM_INTROSPECTION_ENABLED=true

# -----------------------------------------------------
# 存储配置
# -----------------------------------------------------
MEDPLUM_BINARY_STORAGE=file:./binary/
MEDPLUM_BINARY_STORAGE_PROD=file:./binary/
MEDPLUM_STORAGE_BASE_URL=https://phi.s2y.us/storage/
MEDPLUM_STORAGE_BASE_URL_PROD=https://phi.s2y.us/storage/

# -----------------------------------------------------
# 应用限制配置
# -----------------------------------------------------
MEDPLUM_MAX_JSON_SIZE=1mb
MEDPLUM_MAX_BATCH_SIZE=50mb
MEDPLUM_SHUTDOWN_TIMEOUT_MILLISECONDS=30000

# -----------------------------------------------------
# 支持配置
# -----------------------------------------------------
MEDPLUM_SUPPORT_EMAIL="Medplum <support@medplum.com>"

# -----------------------------------------------------
# Bot 配置
# -----------------------------------------------------
MEDPLUM_BOT_LAMBDA_ROLE_ARN=
MEDPLUM_BOT_LAMBDA_LAYER_NAME=medplum-bot-layer

# =======================================================
# VERCEL SECRET 变量名映射
# =======================================================
# 以下是 vercel.json 中引用的 Secret 变量名
# 在 Vercel 控制台中需要创建这些 Secret：
#
# medplum_database_host = aws-0-us-east-1.pooler.supabase.com
# medplum_database_port = 5432
# medplum_database_dbname = postgres
# medplum_database_username = postgres.nkuczuywgfuelgrkneql
# medplum_database_password = Sing2YHVH!777
# medplum_database_ssl_require = true
# medplum_database_ssl_reject_unauthorized = false
# medplum_redis_host_prod = enough-kite-37221.upstash.io
# medplum_redis_port_prod = 6379
# medplum_redis_password_prod = AZFlAAIncDEzM2EzMjBmZjcwYmQ0NjNhYWI3ZTRjYzIwYmU0YjkxM3AxMzcyMjE
# medplum_signing_key_id_prod = my-key-id
# medplum_signing_key_passphrase_prod = top_secret
# medplum_admin_client_id_prod = 2a4b77f2-4d4e-43c6-9b01-330eb5ca772f

# =======================================================
# 部署前检查清单
# =======================================================
# [✓] 替换所有域名为实际域名 (phi.s2y.us)
# [✓] 创建并配置云 Redis 服务 (Upstash - 已完成)
# [ ] 在 Vercel 控制台导入所有环境变量
# [ ] 确认所有 Secret 变量都已创建
# [ ] 重新部署应用
# [ ] 测试应用功能是否正常